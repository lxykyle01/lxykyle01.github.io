<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://lxykyle01.github.io/</id>
    <title>MY SITE</title>
    <updated>2019-12-29T19:12:42.048Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://lxykyle01.github.io/"/>
    <link rel="self" href="https://lxykyle01.github.io/atom.xml"/>
    <subtitle>ASAP</subtitle>
    <logo>https://lxykyle01.github.io/images/avatar.png</logo>
    <icon>https://lxykyle01.github.io/favicon.ico</icon>
    <rights>All rights reserved 2019, MY SITE</rights>
    <entry>
        <title type="html"><![CDATA[Smart Home Project]]></title>
        <id>https://lxykyle01.github.io/post/smart-home-project</id>
        <link href="https://lxykyle01.github.io/post/smart-home-project">
        </link>
        <updated>2019-12-29T12:04:15.000Z</updated>
        <content type="html"><![CDATA[<iframe width='1200' height='1000' frameborder="0"src='https://www.jianguoyun.com/p/DfOD3dcQ4emvBxirhLsC'></iframe>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[International Business Project]]></title>
        <id>https://lxykyle01.github.io/post/international-business-project</id>
        <link href="https://lxykyle01.github.io/post/international-business-project">
        </link>
        <updated>2019-12-29T05:06:17.000Z</updated>
        <content type="html"><![CDATA[ <iframe width='1000' height='1000' frameborder="0"src='https://www.jianguoyun.com/p/DfaWtJsQ4emvBxjS_7oC'></iframe>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[IoT Project]]></title>
        <id>https://lxykyle01.github.io/post/iot-project</id>
        <link href="https://lxykyle01.github.io/post/iot-project">
        </link>
        <updated>2019-12-29T05:03:02.000Z</updated>
        <content type="html"><![CDATA[<iframe width='1000' height='1000' frameborder="0"src='https://www.jianguoyun.com/p/DX7JL5kQ4emvBxje_7oC'></iframe>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Useful Links]]></title>
        <id>https://lxykyle01.github.io/post/useful-links</id>
        <link href="https://lxykyle01.github.io/post/useful-links">
        </link>
        <updated>2019-12-28T21:57:47.000Z</updated>
        <content type="html"><![CDATA[<div class="post-content yue">
          <p>TensorFlow on Spark Github:<br>
<a href="https://github.com/yahoo/TensorFlowOnSpark">https://github.com/yahoo/TensorFlowOnSpark</a></p>
<p>Deep Learning with Apache Spark and TensorFlow:<br>
<a href="https://databricks.com/blog/2016/01/25/deep-learning-with-apache-spark-and-tensorflow.html">https://databricks.com/blog/2016/01/25/deep-learning-with-apache-spark-and-tensorflow.html</a></p>
<p>当Spark遇上TensorFlow分布式深度学习框架原理和实践<br>
<a href="https://juejin.im/post/5ad4b620f265da23a04a0ad0">https://juejin.im/post/5ad4b620f265da23a04a0ad0</a></p>
<p>Spark 随机森林算法原理、源码分析及案例实战<br>
<a href="https://www.ibm.com/developerworks/cn/opensource/os-cn-spark-random-forest/">https://www.ibm.com/developerworks/cn/opensource/os-cn-spark-random-forest/</a></p>
<p>Scalable-machine-learning<br>
<a href="https://docs.huihoo.com/machine-learning/scalable-machine-learning/">https://docs.huihoo.com/machine-learning/scalable-machine-learning/</a></p>
<h3 id="papers">Papers</h3>
<p>Spark: Cluster Computing with Working Sets, Matei Zaharia, Mosharaf Chowdhury, Michael J. Franklin, Scott Shenker, Ion Stoica. USENIX HotCloud (2010).<br>
<a href="http://people.csail.mit.edu/matei/papers/2010/hotcloud_spark.pdf">http://people.csail.mit.edu/matei/papers/2010/hotcloud_spark.pdf</a></p>
<p>Resilient Distributed Datasets: A Fault-Tolerant Abstraction for In-Memory Cluster Computing, Matei Zaharia, Mosharaf Chowdhury, Tathagata Das, Ankur Dave, Justin Ma, Murphy McCauley, Michael J. Franklin, Scott Shenker, Ion Stoica. NSDI (2012)<br>
<a href="https://www.usenix.org/system/files/conference/nsdi12/nsdi12-final138.pdf">https://www.usenix.org/system/files/conference/nsdi12/nsdi12-final138.pdf</a></p>
<p>MLlib: Machine Learning in Apache Spark, X. Meng, J. Bradley, B. Yuvaz, E. Sparks, S. Venkataraman, D. Liu, J. Freeman, D. Tsai, M. Amde, S. Owen, D. Xin, R. Xin, M. Franklin, R. Zadeh, M. Zaharia, A. Talwalkar. Preprint (2015).<br>
<a href="https://arxiv.org/pdf/1505.06807.pdf">https://arxiv.org/pdf/1505.06807.pdf</a></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[How to Deploy Hadoop with Ambari]]></title>
        <id>https://lxykyle01.github.io/post/ambari</id>
        <link href="https://lxykyle01.github.io/post/ambari">
        </link>
        <updated>2019-12-23T15:40:58.000Z</updated>
        <content type="html"><![CDATA[<h3 id="1-build-two-vmcentos-7">1. BUILD TWO VM(CentOS 7)</h3>
<figure data-type="image" tabindex="1"><img src="https://lxykyle01.github.io//post-images/1577645718725.png" alt="" loading="lazy"></figure>
<h3 id="2-ssh-connection">2. SSH CONNECTION</h3>
<p>Create public key in Xshell,then copy it to the google cloud server.(For Users)<br>
Change root code(For Root)</p>
<h3 id="3-remote-control">3. REMOTE CONTROL</h3>
<p>Install xfce for master</p>
<pre><code class="language-c"># sodu yum groupinstall xfce 
</code></pre>
<p>Use xstart to load this command /usr/bin/xfce4-session and use Xmanager to remote connect it.<br>
Choose default setting to set up the start window.</p>
<h3 id="4-hostname-and-hosts-config">4. HOSTNAME AND HOSTS CONFIG</h3>
<p>Change hostname to the name in <em>/ect/hosts</em><br>
Add node's hostname and ip in master's hosts file and add master's hostname and ip in node's hosts file.</p>
<pre><code class="language-c">centos 7 
[root@localhost ~]# hostnamectl set-hostname master #your hostname
[root@localhost ~]# vim /etc/sysconfig/network
-------------------------------------------------------------------
# Created by anaconda
NETWORKING=yes
HOSTNAME=master #your hostname
--------------------------------------------------------------------
[root@localhost ~]# vi  /etc/hosts
--------------------------------------------------------------------
192.168.192.154 master
192.168.192.155 node
#your master and nodes ip and hostname
</code></pre>
<h3 id="5-close-firewall">5. Close Firewall</h3>
<pre><code class="language-c">centos7
[root@localhost ~]# systemctl disable firewalld.service  
[root@localhost ~]# systemctl stop firewalld.service 
</code></pre>
<h3 id="6-close-selinux">6. Close SElinux</h3>
<pre><code class="language-c">[root@localhost ~]# vi /etc/sysconfig/selinux
----------------------------------------------------------------------
SELINUX=disabled
</code></pre>
<h3 id="7-clock-synchronise">7. Clock Synchronise</h3>
<pre><code class="language-c">[root@localhost ~] yum install -y ntp  
[root@localhost ~] chkconfig --list ntpd  
[root@localhost ~] systemctl is-enabled ntpd  
[root@localhost ~] systemctl enable ntpd  
[root@localhost ~] systemctl start ntpd 
</code></pre>
<h3 id="8-install-jdk18">8. Install JDK1.8</h3>
<pre><code class="language-c">[root@localhost ~]# cd /usr/local
[root@localhost local]# mkdir jdk8
[root@localhost local]# cd jdk8
[root@master jdk8]# tar -zxvf jdk-8u231-linux-x64.tar.gz 
[root@master jdk8]# vim /etc/profile
-----------------------------------------------------------------------
#java
export JAVA_HOME=/usr/local/jdk8/jdk1.8.0_231
export JRE_HOME=$JAVA_HOME/jre
export CLASSPATH=.:$JAVA_HOME/lib:$JRE_HOME/lib
export PATH=$PATH:$JAVA_HOME/bin
------------------------------------------------------------------------
[root@master jdk8]# source /etc/profile
[root@master jdk8]# java -version #Check it
</code></pre>
<h3 id="9install-other-services">9.Install Other Services</h3>
<pre><code class="language-c">[root@localhost ~]# umask 0022
[root@ambari01 ~]# yum -y install lrzsz
[root@ambari01 ~]# yum install -y openssh-clients
</code></pre>
<p>Steps 1~9 should be done in both master and node server</p>
<h3 id="10-ssh-login-without-using-password">10. SSH login Without Using Password</h3>
<pre><code class="language-c">[root@master ~]# ssh-keygen -t rsa
[root@master ~]# cd .ssh
[root@master .ssh]# ls
id_rsa  id_rsa.pub
[root@master ~]# ssh-copy-id -i ~/.ssh/id_rsa.pub root@192.168.192.155 #node ip address
[root@master ~]# ssh-copy-id -i ~/.ssh/id_rsa.pub root@192.168.192.156 #master ip address
[root@master ~]# ssh 192.168.192.155 #test
[root@node ~]# exit
</code></pre>
<h3 id="11-local-repo-configration">11. Local Repo Configration</h3>
<p>Download these three files to master.<br>
CentOS 7：<br>
http://public-repo-1.hortonworks.com/ambari/centos7/2.x/updates/2.5.0.3/ambari-2.5.0.3-centos7.tar.gz<br>
http://public-repo-1.hortonworks.com/HDP/centos7/2.x/updates/2.6.0.3/HDP-2.6.0.3-centos7-rpm.tar.gz<br>
http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.21/repos/centos7/HDP-UTILS-1.1.0.21-centos7.tar.gz</p>
<pre><code class="language-c">[root@master ~]# yum install yum-utils createrepo yum-plugin-priorities -y
#Add gpgcheck=0
[root@master ~]# vi /etc/yum/pluginconf.d/priorities.conf
---------------------------------------------------------------------------
gpgcheck = 0
---------------------------------------------------------------------------
#check httpd 
[root@master ~]# yum list httpd
#install httpd
[root@master ~]# yum install httpd
#config HTTP 
[root@master ~]# chkconfig httpd on
[root@master ~]# service httpd start
#Creat local repo
[root@master ~]# cd /var/www/html/
[root@master html]# mkdir ambari
[root@master ambari]# cd ..
[root@master html]# mkdir hdp
#creat catalog and unzip

root@master Downloads]# ls
ambari-2.5.0.3-centos7.tar.gz   HDP-UTILS-1.1.0.21-centos7.tar.gz
HDP-2.6.0.3-centos7-rpm.tar.gz

[root@master Downloads]# tar -zxvf ambari-2.5.0.3-centos7.tar.gz -C /var/www/html/ambari
[root@master Downloads]# tar -zxvf HDP-2.6.0.3-centos7-rpm.tar.gz -C /var/www/html/hdp
[root@master Downloads]# tar -zxvf HDP-UTILS-1.1.0.21-centos7.tar.gz -C /var/www/html/hdp

#creat repo
[root@master Downloads]# cd /var/www/html/ambari/
[root@master ambari]# createrepo ./

[root@master Downloads]# cd /etc/yum.repos.d/
[root@master yum.repos.d]# ls
CentOS7-Base-163.repo    CentOS-Debuginfo.repo  CentOS-Sources.repo
CentOS-Base.repo.backup  CentOS-fasttrack.repo  CentOS-Vault.repo
CentOS-CR.repo           CentOS-Media.repo

[root@master yum.repos.d]# wget -nv http://public-repo-1.hortonworks.com/ambari/centos7/2.x/updates/2.5.0.3/ambari.repo
[root@master yum.repos.d]# vim ambari.repo 
------------------------------------------------------------------------------------
#VERSION_NUMBER=2.5.0.3-7
[ambari-2.5.0.3]
name=ambari Version - ambari-2.5.0.3
baseurl=http://master/ambari/ambari/centos7/
gpgcheck=0
gpgkey=http://master/ambari/ambari/centos7/RPM-GPG-KEY/RPM-GPG-KEY-Jenkins
enabled=1
priority=1
------------------------------------------------------------------------------------
[root@master yum.repos.d]# wget -nv http://public-repo-1.hortonworks.com/HDP/centos7/2.x/updates/2.6.0.3/hdp.repo
[root@master yum.repos.d]# vim hdp.repo 
------------------------------------------------------------------------------------
#VERSION_NUMBER=2.6.0.3-8
[HDP-2.6.0.3]
name=HDP Version - HDP-2.6.0.3
baseurl=http://master/hdp/HDP/centos7/
gpgcheck=0
gpgkey=http://master/hdp/HDP/centos7/HDP/centos7/RPM-GPG-KEY/RPM-GPG-KEY-Jenkins
enabled=1
priority=1

[HDP-UTILS-1.1.0.21]
name=HDP-UTILS Version - HDP-UTILS-1.1.0.21
baseurl=http://master/hdp/
gpgcheck=0
gpgkey=http://master/hdp/RPM-GPG-KEY/RPM-GPG-KEY-Jenkins
enabled=1
priority=1
-------------------------------------------------------------------------------------
# yum clean list
# yum update list
# yum makecache
# yum repolist
</code></pre>
<h3 id="12-check-masterhdp-and-masterambariambaricentos7">12. Check master/hdp/ and master/ambari/ambari/centos7/</h3>
<p><img src="https://lxykyle01.github.io//post-images/1577645825672.jpg" alt="" loading="lazy"><br>
###13. Install MySQL</p>
<pre><code class="language-c"># wget http://repo.mysql.com/mysql57-community-release-el7-8.noarch.rpm
# rpm -ivh mysql57-community-release-el7-8.noarch.rpm  --nodeps --force
# cd /etc/yum.repos.d
# ls -l
# yum install -y mysql-server
# systemctl start mysqld
# service mysqld status
# grep 'temporary password' /var/log/mysqld.log  #It will return a random password

# mysql -u root -p

mysql&gt; Enter password: # type the random passwor you got before
mysql&gt; set global validate_password_policy=0;
mysql&gt; set global validate_password_length=4;
mysql&gt; alter user 'root'@'localhost' identified by 'root-1234'; #Set your own password to replace root-1234
mysql&gt; flush privileges;
mysql&gt; quit;

# mysql -u root -p  # type the password you set before

mysql&gt; GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY ' root-1234' WITH GRANT OPTION;
mysql&gt; FLUSH PRIVILEGES;

# yum install -y mysql-connector-java

mysql&gt; create database ambari character set utf8;
mysql&gt; CREATE USER 'ambari'@'%' IDENTIFIED BY 'ambari-1234'; #Set your own password to replace ambari-1234
mysql&gt; GRANT ALL PRIVILEGES ON *.* TO 'ambari'@'%';
mysql&gt; FLUSH PRIVILEGES;

mysql&gt; create database hive character set utf8;
mysql&gt; CREATE USER 'hive'@'%' IDENTIFIED BY 'hive-1234';  #Set your own password to replace hive-1234
mysql&gt; GRANT ALL PRIVILEGES ON *.* TO 'hive'@'%';
mysql&gt; FLUSH PRIVILEGES;
</code></pre>
<h3 id="14-install-ambari">14. Install Ambari</h3>
<pre><code class="language-c"># yum install -y ambari-server
# mysql -uroot -p

mysql&gt; use ambari;
mysql&gt; source /var/lib/ambari-server/resources/Ambari-DDL-MySQL-CREATE.sql;

# ambari-server setup
--------------------------------------------------------------------------------
Customize user account for ambari-server daemon [y/n] (n)? y
Enter user account for ambari-server daemon (root): root
Adjusting ambari-server permissions and ownership...
Checking JDK...Do you want to change Oracle JDK [y/n] (n)? y

[1] Oracle JDK 1.8 + Java Cryptography Extension (JCE) Policy Files 8
[2] Oracle JDK 1.7 + Java Cryptography Extension (JCE) Policy Files 7
[3] Custom JDK

==========================================

Enter choice (1): 3

JAVA_HOME=usr/local/jdk8/jdk1.8.0_231/
Configuring database...Enter advanced database configuration [y/n] (n)? y
Configuring database...
========================================

Choose one of the following options:

[1] - PostgreSQL (Embedded)
[2] - Oracle
[3] - MySQL
[4] - PostgreSQL
[5] - Microsoft SQL Server (Tech Preview)
[6] - SQL Anywhere

==========================================

Enter choice (1): 3

Hostname (localhost): ambari.server
Port (3306):
Database name (ambari):
Username (ambari):
Enter Database Password (ambari-1234):#password you set before
-------------------------------------------------------------------------------
</code></pre>
<h3 id="15-start-ambari">15. Start Ambari</h3>
<pre><code class="language-c"># ambari-server start
</code></pre>
<p>http://master:8080/#/login #USE firefox to open it</p>
<p>Username:admin<br>
Password:admin<br>
<img src="https://lxykyle01.github.io//post-images/1577645803691.jpg" alt="" loading="lazy"></p>
<p>Type cluster name: any name your want</p>
<p>Chose HDP-2.6(Defaut Version)<br>
Use local Repository<br>
<img src="https://lxykyle01.github.io//post-images/1577645785961.jpg" alt="" loading="lazy"></p>
<p>Target Hosts :Paste both master and node FQDN hostname here</p>
<p>For ssh private key: chose id_rsa from /root/.ssh(It is a hide file,you need click show hide files)</p>
<p>Next</p>
<p>Find : SSLError:Failed to connect.Please check openssl library versions.</p>
<p>Use below set for both master and node</p>
<pre><code class="language-c">vim /etc/python/cert-verification.cfg

[https]
verify=disable

vim /etc/ambari-agent/ambari-agent

[security]
force_https_protocol=PROTOCOL_TLSv1_2

# service ambari-server restart
</code></pre>
<p>And restart the webpage to retry before steps.</p>
]]></content>
    </entry>
</feed>